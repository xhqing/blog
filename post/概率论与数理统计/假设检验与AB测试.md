创建于 2023-07-05
关键词: 假设检验, AB测试.

## **AB测试原理简介**

AB测试最核心的原理，就四个字：假设检验。检验我们提出的假设是否正确。对应到AB测试中，就是检验实验组与对照组的某个指标是否有显著差异。

既然是假设检验，那么就是先假设，再收集数据，最后根据收集的数据来做检验。

假设一般成对出现，分为**零假设**和**备选假设**。

在AB测试中，零假设是：实验组与对照组的某个指标相同，无显著差异；备选假设是：实验组与对照组的某个指标不同，有显著差异。

举个例子，我们优化了某算法，想提高页面的点击率，针对这个场景的AB测试，零假设是： 新算法与老算法的页面点击率无明显差异；备选假设是： 新算法与老算法的页面点击率有显著差异。

一般来说，我们是通过具体的指标属性来找寻相应的检验方法。那么问题来了，指标如何分类呢？

指标可以分为两种类别：

1、绝对值类指标。也就是我们平常直接计算就能得到的，比如DAU，点击次数等。我们一般都是统计该指标在一段时间内的均值或者汇总值，不存在两个值之间还要相互计算。

2、相对值类指标。与绝对值类指标相反，我们不能直接计算得到。比如某页面的CTR，我们是用**页面点击数**/**页面展现数**。我们要计算点击数和展现数，两者相除才能得到该指标。类似的，还有XX转化率，XX点击率，XX购买率一类的。我们做的AB实验，大部分情况下都想提高这类指标。

根据指标我们可以知道，该如何计算最小样本量，以及实验周期，以及对应的检验方法。

## **AB测试详细流程**

假设检验，大体上可以分为3步，即提出假设、收集数据和数据检验。应用到具体的AB测试场景中从假设到检验根据实际情况会有一个较长的实验流程，大部分情况下这个流程可以用下图表示清楚。

![image-20230705151716666](img/image-20230705151716666.png)

**选取指标**：在做AB测试之前，我们一定要清楚，我们实验的目标是什么。并落地到具体的几个指标上，这几个指标对于度量实验结果，有非常明显的帮助。但是，指标也要分层级，唯一一个核心指标加上多个观察指标。

核心指标用来度量我们这次实验的效果，以及计算相应的样本量，这个是假设检验要检验的指标；观察指标则用来度量该实验对其他数据的影响，其它指标不是这次实验要检验的主要对象，我们可以通过观察来感觉其它指标是否也有明显的变化，当样本量及其它条件满足的时候也可以对其它指标进行检验，当条件不满足的时候可以重新设计实验来检验其它指标以验证猜想。

**建立假设**：建立零假设和备选假设。零假设是实验组与对照组没有显著差异，简单讲就是在实验组中所做的改变并没有观察到明显的效果；备选假设是实验组与对照组有显著差异，简单讲就是实验组中所做的改变有被观察到有明显的效果。

**选取实验单位**：绝大部分情况下都是使用用户来作为实验单位，即一个用户就是一个样本，用户分流后保证不会出现一些用户同时出现在实验组和对照组。但是有时候也要具体情况具体分析。

**计算样本量**：计算实验所需要的最小样本量是多少。易知，基于统计分析技术的样本量固然是越大越好，但是具体要多大才够？具体是多小会导致结论不可靠？实际情况中样本的采集还会有很多限制，比如在线广告投放的AB测试，所需样本量太大会导致实验的成本太高，这个时候就需要一个合适的样本量的实验，保证实验成本是可以接受的。降低实验成本的方法可以考虑：使用不同的检验指标、使用不同的检验方法和其它一些可以降低广告花费的方法。

中心极限定理的含义，就是只要样本量足够大，无论是什么指标，无论对应的指标分布是怎样的，样本的均值分布都会趋于正态分布。

基于正态分布，我们才能计算出相应的样本量和做假设检验。