创建于 2023-03-06
关键词: 皮尔孙相关系数, 数据标准化

## 数据标准化的定义

设随机变量$$X$$服从均值为$\mu$，标准差为$\sigma$的某种分布，对总体$X$进行标准化定义为：
$$
X' = \frac{X-\mu}{\sigma}
$$
设$X_i$为总体$X$下的样本，对样本$X_i$进行数据标准化定义为：
$$
X_i' = \frac{X_i-\overline X}{\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(X_i-\overline X\right)^2}}
$$
其中，$n$为样本个数，$\overline X$为样本均值，$\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(X_i-\overline X\right)^2}$为样本标准差。

## 皮尔孙相关系数的定义

设随机变量$X$和$Y$分别服从均值为$\mu_X$和$\mu_Y$，标准差为$\sigma_X$和$\sigma_Y$的某种分布，总体$X$和$Y$的皮尔孙相关系数定义为：
$$
\rho_{X,Y} = \frac{\mathbb E\left[\left(X-\mu_X\right)\left(Y-\mu_Y\right)\right]}{\sigma_X\sigma_Y}
$$
设$X_i$和$Y_i$分别为总体$X$和$Y$下样本，对样本$X_i$和$Y_i$计算样本皮尔孙相关系数定义为：
$$
\begin{aligned}
r &= \frac{\frac{1}{n-1}\sum_{i=1}^n\left(X_i-\overline X\right)\left(Y_i-\overline Y\right)}{\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(X_i-\overline X\right)^2}\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(Y_i-\overline Y\right)^2}}\\
  &= \frac{\sum_{i=1}^n\left(X_i-\overline X\right)\left(Y_i-\overline Y\right)}{\sqrt{\sum_{i=1}^n\left(X_i-\overline X\right)^2}\sqrt{\sum_{i=1}^n\left(Y_i-\overline Y\right)^2}}
\end{aligned}
$$
其中，$n$为样本数($X_i$和$Y_i$样本数都为$n$)，$\overline X$和$\overline Y$分别为样本$X_i$和样本$Y_i$的样本均值，$\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(X_i-\overline X\right)^2}$和$\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(Y_i-\overline Y\right)^2}$分别为样本$X_i$和样本$Y_i$的标准差。

## 先做数据标准化处理再计算皮尔孙相关系数和直接计算皮尔孙相关系数一致吗

由前述样本的皮尔孙相关系数定义已经知道了其计算公式，在前提条件和基本假设与此一致的前提下，只要先对样本$X_i$和$Y_i$进行数据标准化处理再计算样本的皮尔孙相关系数看看得出的计算公式是否一致即可。

对样本$X_i$和$Y_i$分别进行数据标准化处理得到：
$$
X_i' = \frac{X_i-\overline X}{\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(X_i-\overline X\right)^2}}
$$

$$
Y_i' = \frac{Y_i-\overline Y}{\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(Y_i-\overline Y\right)^2}}
$$

数据标准化处理后的的样本的均值为$0$，标准差为$1$，因此依据样本皮尔孙相关系数的定义计算如下：
$$
\begin{aligned}
r &= \frac{1}{n-1}\sum_{i=1}^nX_i'Y_i'\\
  &= \frac{1}{n-1}\sum_{i=1}^n\left(\frac{X_i-\overline X}{\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(X_i-\overline X\right)^2}}\right)\left(\frac{Y_i-\overline Y}{\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(Y_i-\overline Y\right)^2}}\right)\\
  &= \frac{\frac{1}{n-1}\sum_{i=1}^n\left(X_i-\overline X\right)\left(Y_i-\overline Y\right)}{\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(X_i-\overline X\right)^2}\sqrt{\frac{1}{n-1}\sum_{i=1}^n\left(Y_i-\overline Y\right)^2}}
\end{aligned}
$$
以上推导结论显然得出：先做数据标准化处理再计算皮尔孙相关系数结果是一致的。