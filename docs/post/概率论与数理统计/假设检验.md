创建于 2023-07-05<br>
关键词: 假设检验, A/B测试.

## **A/B测试原理简介**

A/B测试的核心就是**假设检验**。A/B测试中的假设检验就是检验实验组与对照组的某个指标是否有显著差异。

既然是假设检验，那么就是先假设，再收集数据，最后根据收集的数据来做检验。

假设一般成对出现，分为**零假设**和**备择假设**。

在A/B测试中，零假设是：实验组与对照组的某个指标相同，无显著差异；备择假设是：实验组与对照组的某个指标不同，有显著差异。

举个例子，我们优化了某算法，想提高页面的点击率，针对这个场景的A/B测试，零假设是： 新算法与老算法的页面点击率无明显差异；备择假设是： 新算法与老算法的页面点击率有显著差异。

一般来说，我们是通过具体的检验指标类型来找寻相应的检验方法。检验指标类型有**均值指标**、**标准差指标**和**比例指标(propotion)**，分别对应假设检验中对总体的均值、标准差和比例的检验。如果是想要验证某个总体的均值、标准差或比例和一个常数的大小关系，则称为单总体的假设检验(或单样本的假设检验)；如果是想要验证两个总体的均值、标准差或比例之间的大小关系，则称为双总体的假设检验(或双样本的假设检验)。比如，上述新老算法优化页面点击率(点击率属于比例指标)的A/B测试实验属于双样本(双总体)比例假设检验。

由于A/B测试实验本身需要实验组和对照组之间进行对比，因此都属于双样本(双总体)假设检验。

确定了检验指标之后就可以根据其它条件(如总体方差是否可依据经验视为已知等)确定检验方法，然后确定实验所需最小样本量计算方式，以及估算实验周期等。

## **A/B测试详细流程**

假设检验，大体上可以分为3步，即提出假设、收集数据和数据检验。应用到具体的A/B测试场景中从假设到检验根据实际情况会有一个较长的实验流程，大部分情况下这个流程可以用下图表示清楚。

![image-20230705151716666](img/image-20230705151716666.png)

**选取指标**：在做A/B测试之前，我们一定要清楚，我们实验的目标是什么。并落地到具体的几个指标上，这几个指标对于度量实验结果，有非常明显的帮助。但是，指标也要分层级，唯一一个核心指标加上多个观察指标。

核心指标用来度量我们这次实验的效果，以及计算相应的样本量，这个是假设检验要检验的指标；观察指标则用来度量该实验对其他数据的影响，其它指标不是这次实验要检验的主要对象，我们可以通过观察来感觉其它指标是否也有明显的变化，当样本量及其它条件满足的时候也可以对其它指标进行检验，当条件不满足的时候可以重新设计实验来检验其它指标以验证猜想。

**建立假设**：建立零假设和备择假设。零假设是实验组与对照组没有显著差异，简单讲就是在实验组中所做的改变并没有观察到明显的效果；备择假设是实验组与对照组有显著差异，简单讲就是实验组中所做的改变有被观察到有明显的效果。

**选取实验单位**：绝大部分情况下都是使用用户来作为实验单位，即一个用户就是一个样本，用户分流后保证不会出现一些用户同时出现在实验组和对照组。但是有时候也要具体情况具体分析。

**计算样本量**：计算实验所需要的最小样本量是多少。由中心极限定理易知，样本量固然是越大越好，然而实际情况中样本的采集会有很多限制，比如在线广告投放的A/B测试，所需样本量太大会导致实验成本太高，这个时候就需要一个合适的样本量的实验，保证实验成本是可以接受的。降低实验成本的方法可以考虑：使用不同的检验指标、使用不同的检验方法和其它一些可以降低广告花费的方法。



